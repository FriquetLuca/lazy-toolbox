!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.LazyPortable=e():t.LazyPortable=e()}(self,(()=>(()=>{"use strict";var t={380:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.LazyCounter=void 0;class n{static fullPrice(t,...e){const r=n.findItem(t,e);if(r){let t=r.price;if(r.required)for(const a of r.required)a.quantity?t+=a.quantity*n.fullPrice(a.name,...e):t+=n.fullPrice(a.name,...e);return t}return 0}static allRowMaterials(t,...e){const r=n.findItem(t,e);if(r){if(r.required&&r.required.length>0){const t=new Map;for(const a of r.required){const r=n.allRowMaterials(a.name,...e);for(const e of r){const n=(null==e?void 0:e.quantity)||1;t.has(e.name)?t.set(e.name,(a.quantity?a.quantity*n:n)+t.get(e.name)):t.set(e.name,a.quantity?a.quantity*n:n)}}const a=[];for(const e of t)a.push({name:e[0],quantity:e[1]});return a}return[{name:r.name,quantity:1}]}return[]}static findItem(t,e){for(let n=0;n<e.length;n++)if(e[n].name===t)return e[n]}}e.LazyCounter=n},518:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.LazyDataGraph=void 0;class n{constructor(...t){this._points=[...t],this.isTan=!1}get points(){return[...this._points]}set points(t){this._points=[...t]}isTangentGraph(){return this.isTan}getTangentGraph(){const t=new n(...this.generateSlope());return t.isTan=!0,t}generateSlope(){if(this._points.length<=1)return[];const t=this._points.length-1,e=[];for(let n=0;n<t;n++){const t=this._points[n],r=this._points[n+1],a=r.value-t.value,s={value:a,label:`${t.label}-${r.label}`,increasePercent:a/(0!=t.value?t.value:1)};e.push(s)}return e}}e.LazyDataGraph=n},473:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.dateLog=e.dateLogMS=void 0,e.dateLogMS=function(t){const e=new Date(Date.now());let n=`${e.getHours()}`;n=1==n.length?`0${n}`:n;let r=`${e.getMinutes()}`;r=1==r.length?`0${r}`:r;let a=`${e.getSeconds()}`;a=1==a.length?`0${a}`:a;let s=`${e.getMilliseconds()}`;return s=1==s.length?`00${s}`:2==s.length?`0${s}`:s,`[${n}:${r}:${a}.${s}] ${t.toString()}`},e.dateLog=function(t){const e=new Date(Date.now());let n=`${e.getHours()}`;n=1==n.length?`0${n}`:n;let r=`${e.getMinutes()}`;r=1==r.length?`0${r}`:r;let a=`${e.getSeconds()}`;return a=1==a.length?`0${a}`:a,`[${n}:${r}:${a}] ${t.toString()}`}},593:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.LazyMapper=void 0;class n{static filterData(t,e,n,r){let a=e;return void 0!==t&&(a=n(t)),r(a)}static filterNumber(t,e,r){return n.filterData(t,e,(t=>null===t?0:Number(t)),r)}static filterString(t,e,r){return n.filterData(t,e,(t=>null===t?e:String(t)),r)}static defaultData(t,e,r){return n.filterData(t,e,r,(t=>t))}static defaultBoolean(t,e){return n.defaultData(t,e,(t=>null===t?e:Boolean(t)))}static defaultNumber(t,e){return n.defaultData(t,e,(t=>null===t?0:Number(t)))}static defaultString(t,e){return n.defaultData(t,e,(t=>null===t?e:String(t)))}static boolean(t){return n.defaultData(t,!1,(t=>Boolean(t)))}static number(t){return n.defaultData(t,0,(t=>Number(t)))}static string(t){return n.defaultData(t,"",(t=>t.toString()))}}e.LazyMapper=n},779:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.LazyMath=void 0;class n{static modulo(t,e){return t-Math.floor(t/e)*e}static frac(t){return t-Math.floor(t)}static saturate(t){return t>1?1:t<0?0:t}static sum(t,e,n){let r=0;for(let a=t;a<=e;a++)r+=n(a);return r}static product(t,e,n){let r=1;for(let a=t;a<=e;a++)r*=n(a);return r}static isPrime(t){if((t=Math.floor(t))<=3&&(t<0&&(t=-t),t<=3))return t>1;if(t%2==0||t%3==0)return!1;for(let e=5;e*e<=t;e+=6)if(t%e==0||t%(e+2)==0)return!1;return!0}static step(t,e){return e>=t?1:t}static lerp(t,e,n){return t+(e-t)*n}static unlerp(t,e,n){return(n-t)/(e-t)}static binomialCoefficient(t,e){const n=t/2;if(e>t)throw new Error("k can't be greater than n.");if(e==t)return 1;if(e>n){let n=1,r=1;for(let a=e+1,s=1;a<=t;a++,s++)n*=a,r*=s;return n/r}if(t%2==0&&n==e){let e,r=1,a=1;for(e=1;e<=n;e++)a*=e;for(;e<=t;e++)r*=e;return r/a}{let n=1,r=1;for(let a=t-e+1,s=1;a<=t;a++,s++)n*=a,r*=s;return n/r}}static derivative(t,e){const n=919191919e-24;return(e(t+n)-e(t))/n}static antiDerivative(t,e,n=50){n<=0&&(n=1);let r=0;const a=t/n;for(let t=0;t<n;t++)r+=e(a*t)*a;return r}static integral(t,e,n,r=50){r<=0&&(r=1);let a=0;const s=(e-t)/r;for(let e=0;e<r;e++)a+=n(t+s*e)*s;return a}static combinationArrayNRNO(t,e){let r=t.length;if(r<e)throw new Error("The number of object must be greater or equal to k.");const a=r-e+1;let s=[];for(let r=0;r<a;r++){let l=[];l.push(t[r]);let i=n.combinationArrayDepthNRNO(t,r+1,a+1,e-1,0,l);Array.prototype.push.apply(s,i)}return s}static combinationArrayDepthNRNO(t,e,r,a,s=0,l=[]){if(s>=a)return[l];let i=[];for(let o=e;o<r;o++){let e=[...l,t[o]],u=n.combinationArrayDepthNRNO(t,o+1,r+1,a,s+1,e);Array.prototype.push.apply(i,u)}return i}}e.LazyMath=n},879:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.LazySingleton=void 0;class n{constructor(){}static instanceFactory(...t){return n.instance||(n.instance=new this(...t)),n.instance}static getInstance(){return n.instance}}e.LazySingleton=n},806:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.LazySort=void 0,e.LazySort=class{static byRequired(t,e=!1){const n={};for(const e of t)n[e.name]=e;const r=[],a=new Set;function s(t){if(t&&!a.has(t.name)&&n[t.name]){a.add(t.name);for(const e of t.required||[])s(n[e]);r.push(t)}}for(const e of t)s(e);if(e)for(let t=r.length-1;t>=0;t--){const e=r[t].required||[];for(const a of e)if(!n[a]){n[r[t].name]&&delete n[r[t].name],delete r[t],r.splice(t,1),t=r.length-1;break}}return r}}},176:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.LazyText=void 0;class n{static extract(t,e,n){return t.substring(e,e+n)}static extractFromUntil(t,e,r){let a=e;for(let n=e;t.length&&r(t[n],n,t);n++)a=n;return{value:n.extract(t,e,a-e),lastIndex:a}}static countLines(t){let e=1;for(let n=0;n<t.length;n++)"\n"===t[n]&&e++;return e}static countLinesChar(t,e){const n={lines:1,lineChar:0},r=null!=e?e:t.length-1;for(let e=0;e<=r;e++)n.lineChar++,"\n"===t[e]&&(n.lines++,n.lineChar=0);return n}}e.LazyText=n,n.letters=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","á","à","ä","â","é","è","ë","ê","í","ì","ï","î","ó","ò","ö","ô","ú","ù","ü","û","Ç","ç"],n.digits=["0","1","2","3","4","5","6","7","8","9"],n.variables=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","_","$","0","1","2","3","4","5","6","7","8","9"],n.controls=["\n","\t"],n.whitespaces=[" "],n.symbols=["§","@","¥","€","¬","&","|","#","^","*","$","%","±","=","+","-","*","/","\\","<",">","~","°","_","`","´","¨","(",")","[","]","{","}"],n.punctuations=[".",",",";",":","?","!",'"',"'","«","»","“","„"]},238:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getType=void 0,e.getType=function(t){return"function"==typeof t&&/^\s*class\s+/.test(t.toString())?"class":Array.isArray(t)?"array":typeof t}},722:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.LazyParsing=void 0;const r=n(176),a=n(251),s=n(238);class l{constructor(...t){this.rules=[],this.rules.push(...t)}addRules(...t){this.rules.push(...t)}removeRules(...t){for(const e of t)for(let t=this.rules.length-1;t>=0;t--)this.rules[t].name&&this.rules[t].name===e&&delete this.rules[t]}parse(t){return l.parse(t,l.createSet(...this.rules)).result}static createSet(...t){const e=[];for(const n of t)e.push(new a.LazyPattern(n));return e}static parse(t,e,n=0,a=((t,e,n)=>!1)){var s;const l=[];for(;n<t.length;n++){if(a(n,t[n],t))return{isPatternEnd:!0,result:l,lastIndex:n};for(let a=0;a<e.length;a++)if(e[a].isActualPattern(n,t[n],t)){const i=r.LazyText.countLinesChar(t,n),o=e[a].fetchContent(n,t[n],t,e,e[a]);if(void 0===o.lastIndex)throw new Error("Missing returned lastIndex in a fetch.");n=o.lastIndex;let u={name:null===(s=e[a])||void 0===s?void 0:s.name,currentName:null==o?void 0:o.name,begin:null==o?void 0:o.begin,end:null==o?void 0:o.end,nested:null==o?void 0:o.nested,content:null==o?void 0:o.content,error:null==o?void 0:o.error,line:null==i?void 0:i.lines,lineChar:null==i?void 0:i.lineChar};l.push(u);break}}return{isPatternEnd:!1,result:l,lastIndex:n-1}}static toString(t,e=!1){return l.extractString("array"!==(0,s.getType)(t)?t.result:t,e)}static toStringDebug(t,e=!1){return l.stringifyParse("array"!==(0,s.getType)(t)?t.result:t,e)}static generateSpace(t){let e="";for(let n=0;n<t;n++)e=`${e}    `;return e}static extractString(t,e=!1,n=0){const r=e?l.generateSpace(n):"",a=e?"\n":"";let s="";for(let i=0;i<t.length;i++)t[i].nested?(s=`${s}${r}${t[i].begin}${a}`,t[i].error||(s=`${s}${l.extractString(t[i].content,e,n+1)}${a}${r}${t[i].end}${a}`)):s=`${s}${r}${t[i].content}${a}`;return s}static stringifyParse(t,e=!1,n=0){const r=e?l.generateSpace(n):"",a=e?"\n":"";let s="";for(let i=0;i<t.length;i++)t[i].nested?(s=`${s}${r}[${t[i].name}][Nested]: ${t[i].begin}${a}`,t[i].error||(s=`${s}${l.stringifyParse(t[i].content,e,n+1)}${r}${t[i].end}${a}`)):s=`${s}${r}[${t[i].name}]: ${t[i].content}${a}`;return s}}e.LazyParsing=l},251:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.LazyPattern=void 0,e.LazyPattern=class{constructor(t){var e;this._name=null!==(e=t.name)&&void 0!==e?e:"",this.defaultValue=t.defaultValue,this.isPattern=t.isPattern,this.isPatternEnd=t.isPatternEnd,this.fetch=t.fetch}get name(){return this._name}isActualPattern(t,e,n){return void 0!==this.isPattern&&null!==this.isPattern&&this.isPattern(t,e,n)}isEndPattern(t,e,n){return void 0!==this.isPatternEnd&&null!==this.isPatternEnd&&this.isPatternEnd(t,e,n)}fetchContent(t,e,n,r,a){return void 0!==this.fetch&&null!==this.fetch?this.fetch(t,e,n,a.isPatternEnd,r):{lastIndex:t,content:this.defaultValue}}}},353:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.LazyRule=void 0;const r=n(722),a=n(176);e.LazyRule=class{static simpleChar(t,e){return{name:t,defaultValue:null,isPattern:(t,n,r)=>e(n),fetch:(e,n,r)=>({name:t,content:n,lastIndex:e})}}static simpleKeys(t,...e){return{name:t,defaultValue:null,isPattern:(t,n,r)=>{for(let n of e)if(r.substring(t,t+n.length)===n)return!0;return!1},fetch:(n,r,a)=>{let s={name:t,content:"",lastIndex:n};for(let t of e)if(a.substring(n,n+t.length)===t){s.content=a.substring(n,n+t.length),s.lastIndex=n+t.length-1;break}return s}}}static simpleCharbox(t,e,n,a,s){return{name:t,defaultValue:e,begin:e,end:n,isPattern:(t,n,r)=>r.substring(t,t+e.length)===e,isPatternEnd:(t,e,r)=>s?s(t,e,r):r.substring(t,t+n.length)===n,fetch:(l,i,o,u,c)=>{const d=r.LazyParsing.parse(o,a?0==a.length?null!=c?c:[]:a:null!=c?c:[],l+e.length,null!=s?s:u);return d.isPatternEnd?{name:t,content:d.result,error:!1,nested:!0,begin:e,end:n,lastIndex:d.lastIndex+n.length-1}:{name:t,content:e,nested:!0,error:!0,begin:e,end:n,lastIndex:l}}}}static word(){return{name:"word",defaultValue:"",isPattern:(t,e,n)=>a.LazyText.letters.includes(e),fetch:(t,e,n)=>{const r={name:"word",content:"",lastIndex:t};for(let e=t;e<n.length&&a.LazyText.letters.includes(n[e]);e++)r.lastIndex=e;return r.content=n.substring(t,r.lastIndex+1),r}}}static number(t=!1,e=!1){let n=t?",":".";return{name:"number",defaultValue:0,isPattern:(t,e,r)=>{const s=e===n&&a.LazyText.digits.includes(a.LazyText.extract(r,t+1,1));return a.LazyText.digits.includes(e)||s},fetch:(t,r,s)=>{const l={name:"number",content:"",lastIndex:t};let i=!1,o=!1;for(let r=t;r<s.length;r++){if(!a.LazyText.digits.includes(s[r])){if("e"===s[r]&&e&&!o){if(o=!0,r+2<s.length&&("+"===s[r+1]||"-"===s[r+1])&&a.LazyText.digits.includes(s[r+2])||r+1<s.length&&a.LazyText.digits.includes(s[r+1])){l.content=`${l.content}${s[r]}${s[r+1]}`,l.lastIndex=++r;continue}break}if(!i&&s[r]===n){i=!0,0==l.content.length?l.content="0.":l.content=`${l.content}.`,l.lastIndex=r;continue}l.lastIndex=r-1;break}l.lastIndex=r,l.content=`${l.content}${s[r]}`}return l.content=l.content,l}}}static variable(){return{name:"variable",defaultValue:"",isPattern:(t,e,n)=>a.LazyText.letters.includes(e)||"_"===e,fetch:(t,e,n)=>{const r={name:"variable",content:"",lastIndex:t};for(let e=t;e<n.length;e++){if(!a.LazyText.letters.includes(n[e])&&"_"!==n[e]){r.lastIndex=e-1;break}r.lastIndex=e}return r.content=n.substring(t,r.lastIndex+1),r}}}static keyword(...t){return{name:"keyword",defaultValue:"",isPattern:(e,n,r)=>{const s=r.length-e;for(const n of t)if(n.length<=s&&r.substring(e,e+n.length)===n){const t=e+n.length;if(!(t<r.length)||!a.LazyText.letters.includes(r[t])&&"_"!==r[t])return!0}return!1},fetch:(e,n,r)=>{const s={name:"keyword",content:"",lastIndex:e},l=r.length-e;for(let n of t)if(n.length<=l){const t=r.substring(e,e+n.length);if(t===n){const l=e+n.length;if(!(l<r.length)||!a.LazyText.letters.includes(r[l])&&"_"!==r[l])return s.content=t,s.lastIndex=l-1,s}}return s}}}static any(t){return{name:t,defaultValue:null,isPattern:(t,e,n)=>!0,fetch:(e,n,r)=>({name:t,content:n,lastIndex:e})}}static parseString(t,e){return{name:t,defaultValue:"",isPattern:(t,n,r)=>r.substring(t,t+e.length)===e,fetch:(n,r,a)=>{const s={name:t,content:"",error:!1,lastIndex:n};let l=!1;for(let t=n+e.length;t<a.length;t++)if("\\"!==a[t]){if(a.substring(t,t+e.length)===e){l=!0;break}s.lastIndex=t}else t++,s.lastIndex=t;return l?(s.content=a.substring(n+e.length,s.lastIndex+1),s.lastIndex=s.lastIndex+e.length):(s.error=!0,s.lastIndex=n+e.length),s}}}static regex(t,e){let n;return{name:t,defaultValue:"",isPattern:(t,r,a)=>{const s=e.exec(a.slice(t));return!(!s||0!=s.index||(n=s,0))},fetch:(e,r,a)=>({name:t,content:a.substring(e,e+n[0].length),lastIndex:e+n[0].length-1})}}}}},e={};function n(r){var a=e[r];if(void 0!==a)return a.exports;var s=e[r]={exports:{}};return t[r](s,s.exports,n),s.exports}var r={};return(()=>{var t=r;Object.defineProperty(t,"__esModule",{value:!0}),t.dateLogMS=t.dateLog=t.getType=t.LazyRule=t.LazyPattern=t.LazyParsing=t.LazyText=t.LazySingleton=t.LazyCounter=t.LazySort=t.LazyDataGraph=t.LazyMapper=t.LazyMath=void 0;var e=n(779);Object.defineProperty(t,"LazyMath",{enumerable:!0,get:function(){return e.LazyMath}});var a=n(593);Object.defineProperty(t,"LazyMapper",{enumerable:!0,get:function(){return a.LazyMapper}});var s=n(518);Object.defineProperty(t,"LazyDataGraph",{enumerable:!0,get:function(){return s.LazyDataGraph}});var l=n(806);Object.defineProperty(t,"LazySort",{enumerable:!0,get:function(){return l.LazySort}});var i=n(380);Object.defineProperty(t,"LazyCounter",{enumerable:!0,get:function(){return i.LazyCounter}});var o=n(879);Object.defineProperty(t,"LazySingleton",{enumerable:!0,get:function(){return o.LazySingleton}});var u=n(176);Object.defineProperty(t,"LazyText",{enumerable:!0,get:function(){return u.LazyText}});var c=n(722);Object.defineProperty(t,"LazyParsing",{enumerable:!0,get:function(){return c.LazyParsing}});var d=n(251);Object.defineProperty(t,"LazyPattern",{enumerable:!0,get:function(){return d.LazyPattern}});var f=n(353);Object.defineProperty(t,"LazyRule",{enumerable:!0,get:function(){return f.LazyRule}});var g=n(238);Object.defineProperty(t,"getType",{enumerable:!0,get:function(){return g.getType}});var h=n(473);Object.defineProperty(t,"dateLog",{enumerable:!0,get:function(){return h.dateLog}}),Object.defineProperty(t,"dateLogMS",{enumerable:!0,get:function(){return h.dateLogMS}})})(),r})()));